<!DOCTYPE html>
<html>
<body>

<form action="PayslipServlet" method="get">
      First name:   <input type="text" name="fname" id="fname"><br/>
      Last name:    <input type="text" name="lname" id="lname"><br/>
      
      <br>
      <input type="button" value="Submit" onclick="getLocation()">
</form>


<span id="result"></span>




<p id="demo"></p>


<script>
var x = document.getElementById("demo");

function pr() {
            document.getElementById("result").innerHTML = "<br>You are signed in to class " + document.getElementById('fname').value + " " + document.getElementById('lname').value;
}

function pr2() {
            document.getElementById("result").innerHTML = "<br>get YOSELF TO CLAASSSSSSSSS!!! NO HAX HERE -- implementing SYSTEM TO STOP GPS SPOOFING SOON ";
}

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  /* was testing out lat and long*/
  // x.innerHTML = "Latitude: " + position.coords.latitude + 
  // "<br>Longitude: " + position.coords.longitude;
  var kilo = getDistanceFromLatLonInKm(38.5816, 121.4944, position.coords.latitude, position.coords.longitude)
  if (kilo < 0.01524) {
  	pr();
  }	else {
  	pr2();
  }
}

function convertKilometersToFeet(kilometers) {
	var feet = kilometers * 3280.8;
	console.log(feet + " Feet");
	return feet;
}

function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {
  var R = 6371; // Radius of the earth in km
  var dLat = deg2rad(lat2-lat1);  // deg2rad below
  var dLon = deg2rad(lon2-lon1); 
  var a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
    Math.sin(dLon/2) * Math.sin(dLon/2)
    ; 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  /* testing this output function*/
  // window.alert("Distance in Kilo: " + d);
  return d;
}

function deg2rad(deg) {
  return deg * (Math.PI/180)
}

function resultsFeet(){

}


</script>

</body>
</html>

